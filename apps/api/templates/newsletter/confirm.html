{% extends 'base.html' %}
{% load static %}

{% block title %}
    {% if confirmed %}Subscription Confirmed{% else %}Confirmation Failed{% endif %} - {{ block.super }}
{% endblock %}

{% block extra_css %}
<style>
    .confirmation-container {
        max-width: 600px;
        margin: 0 auto;
        padding: 3rem 2rem;
        text-align: center;
    }
    .confirmation-card {
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        padding: 2rem;
    }
    .success-icon {
        font-size: 4rem;
        color: #27ae60;
        margin-bottom: 2rem;
    }
    .error-icon {
        font-size: 4rem;
        color: #e74c3c;
        margin-bottom: 2rem;
    }
    .welcome-message {
        background-color: #d4edda;
        border: 1px solid #c3e6cb;
        border-radius: 5px;
        padding: 1.5rem;
        margin: 2rem 0;
    }
    .error-message {
        background-color: #f8d7da;
        border: 1px solid #f5c6cb;
        border-radius: 5px;
        padding: 1.5rem;
        margin: 2rem 0;
    }
    .btn-action {
        background-color: #3498db;
        border-color: #3498db;
        padding: 0.75rem 2rem;
        font-size: 1.1rem;
        font-weight: 600;
        border-radius: 5px;
        margin: 0.5rem;
    }
    .btn-action:hover {
        background-color: #2980b9;
        border-color: #2980b9;
    }
    .btn-secondary-action {
        background-color: #6c757d;
        border-color: #6c757d;
        padding: 0.75rem 2rem;
        font-size: 1.1rem;
        font-weight: 600;
        border-radius: 5px;
        margin: 0.5rem;
    }
</style>
{% endblock %}

{% block content %}
<div class="container mt-5">
    <div class="row justify-content-center">
        <div class="col-lg-8">
            <div class="confirmation-container">
                <div class="confirmation-card">
                    {% if confirmed %}
                        <div class="success-icon">
                            <i class="fas fa-check-circle"></i>
                        </div>
                        
                        <h1 class="mb-4">{{ page_title }}</h1>
                        
                        <div class="welcome-message">
                            <h4><i class="fas fa-party-horn me-2"></i>Welcome to our community!</h4>
                            <p class="mb-0">
                                Your newsletter subscription has been successfully confirmed. 
                                You'll now receive our latest updates and exclusive content.
                            </p>
                        </div>
                        
                        {% if subscription %}
                            <p class="text-muted">
                                <strong>Subscription Details:</strong><br>
                                Email: {{ subscription.email }}<br>
                                {% if subscription.full_name %}Name: {{ subscription.full_name }}<br>{% endif %}
                                Confirmed: {{ subscription.confirmed_at|date:"F j, Y \a\t g:i A" }}
                            </p>
                        {% endif %}
                        
                        <p class="lead">
                            What can you expect from our newsletter?
                        </p>
                        
                        <ul class="list-unstyled text-start" style="max-width: 400px; margin: 0 auto;">
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Latest blog posts and articles</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Exclusive tips and insights</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Product updates and announcements</li>
                            <li class="mb-2"><i class="fas fa-check text-success me-2"></i>Curated content recommendations</li>
                        </ul>
                        
                        <div class="mt-4">
                            <a href="{% url 'blog:post_list' %}" class="btn btn-primary btn-action">
                                <i class="fas fa-blog me-2"></i>Read Our Blog
                            </a>
                            <a href="{% url 'core:home' %}" class="btn btn-secondary btn-secondary-action">
                                <i class="fas fa-home me-2"></i>Go to Homepage
                            </a>
                        </div>
                        
                    {% else %}
                        <div class="error-icon">
                            <i class="fas fa-exclamation-triangle"></i>
                        </div>
                        
                        <h1 class="mb-4">{{ page_title }}</h1>
                        
                        <div class="error-message">
                            <h4><i class="fas fa-times-circle me-2"></i>Confirmation Failed</h4>
                            <p class="mb-0">
                                We couldn't confirm your newsletter subscription. This could be because:
                            </p>
                            <ul class="text-start mt-2 mb-0">
                                <li>The confirmation link has expired</li>
                                <li>The link has already been used</li>
                                <li>The link is invalid or corrupted</li>
                            </ul>
                        </div>
                        
                        <p class="text-muted mt-3">
                            Don't worry! You can try subscribing again or contact us if you continue to have issues.
                        </p>
                        
                        <div class="mt-4">
                            <a href="{% url 'newsletter:subscribe' %}" class="btn btn-primary btn-action">
                                <i class="fas fa-envelope me-2"></i>Subscribe Again
                            </a>
                            <a href="{% url 'core:home' %}" class="btn btn-secondary btn-secondary-action">
                                <i class="fas fa-home me-2"></i>Go to Homepage
                            </a>
                        </div>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}