# ===================================
# SonarQube Project Configuration
# ===================================

# Project identification
sonar.projectKey=fullstack-monolith-transformation
sonar.projectName=Fullstack Monolith Transformation
sonar.projectVersion=1.0.0
sonar.projectDescription=Enterprise-grade fullstack monolithic architecture with Django API and Next.js frontend

# Source code configuration
sonar.sources=apps,packages
sonar.tests=tests

# Language-specific configurations
sonar.python.version=3.11,3.12
sonar.typescript.node.maxspace=8192

# ===================================
# Source Code Inclusion/Exclusion
# ===================================

# Include patterns
sonar.inclusions=**/*.py,**/*.js,**/*.jsx,**/*.ts,**/*.tsx,**/*.css,**/*.scss,**/*.html

# Exclude patterns
sonar.exclusions=\
  **/node_modules/**,\
  **/venv/**,\
  **/.venv/**,\
  **/migrations/**,\
  **/static/**,\
  **/media/**,\
  **/__pycache__/**,\
  **/*.pyc,\
  **/build/**,\
  **/dist/**,\
  **/.next/**,\
  **/coverage/**,\
  **/htmlcov/**,\
  **/.pytest_cache/**,\
  **/.mypy_cache/**,\
  **/.tox/**,\
  **/logs/**,\
  **/*.log,\
  **/.git/**,\
  **/.vscode/**,\
  **/.idea/**,\
  **/Dockerfile*,\
  **/docker-compose*.yml,\
  **/*.md,\
  **/*.txt,\
  **/*.json,\
  **/*.yaml,\
  **/*.yml,\
  **/*.xml,\
  **/*.ini,\
  **/*.cfg,\
  **/*.toml

# Test exclusions
sonar.test.exclusions=\
  **/tests/**,\
  **/*test*.py,\
  **/*test*.js,\
  **/*test*.ts,\
  **/*test*.tsx,\
  **/*.test.py,\
  **/*.test.js,\
  **/*.test.ts,\
  **/*.test.tsx,\
  **/*.spec.py,\
  **/*.spec.js,\
  **/*.spec.ts,\
  **/*.spec.tsx

# ===================================
# Coverage Configuration
# ===================================

# Python coverage
sonar.python.coverage.reportPaths=coverage.xml,htmlcov/coverage.xml
sonar.python.xunit.reportPath=test-results/pytest.xml

# JavaScript/TypeScript coverage
sonar.javascript.lcov.reportPaths=coverage/lcov.info
sonar.typescript.lcov.reportPaths=coverage/lcov.info

# ===================================
# Quality Gate Configuration
# ===================================

# Code coverage thresholds
sonar.coverage.exclusions=\
  **/tests/**,\
  **/migrations/**,\
  **/settings/**,\
  **/config/**,\
  **/*test*.py,\
  **/*test*.js,\
  **/*test*.ts,\
  **/*test*.tsx,\
  **/manage.py,\
  **/wsgi.py,\
  **/asgi.py

# Duplication exclusions
sonar.cpd.exclusions=\
  **/migrations/**,\
  **/tests/**,\
  **/*test*.py,\
  **/*test*.js,\
  **/*test*.ts,\
  **/*test*.tsx

# ===================================
# Language-Specific Settings
# ===================================

# Python settings
sonar.python.pylint.reportPaths=pylint-report.txt
sonar.python.bandit.reportPaths=bandit-report.json
sonar.python.flake8.reportPaths=flake8-report.txt

# JavaScript/TypeScript settings
sonar.eslint.reportPaths=eslint-report.json
sonar.typescript.tsconfigPath=tsconfig.json

# ===================================
# Quality Profiles
# ===================================

# Use Sonar way profiles with custom rules
sonar.profile.py=Sonar way
sonar.profile.js=Sonar way
sonar.profile.ts=Sonar way

# ===================================
# Issue Configuration
# ===================================

# Issue exclusions by rule
sonar.issue.ignore.multicriteria=e1,e2,e3,e4,e5

# Exclude TODO comments from being reported as issues
sonar.issue.ignore.multicriteria.e1.ruleKey=python:S1135
sonar.issue.ignore.multicriteria.e1.resourceKey=**/*.py

# Exclude console.log from being reported in development files
sonar.issue.ignore.multicriteria.e2.ruleKey=typescript:S2228
sonar.issue.ignore.multicriteria.e2.resourceKey=**/dev/**/*.ts

# Exclude magic numbers in test files
sonar.issue.ignore.multicriteria.e3.ruleKey=python:S109
sonar.issue.ignore.multicriteria.e3.resourceKey=**/test*.py

# Exclude unused imports in __init__.py files
sonar.issue.ignore.multicriteria.e4.ruleKey=python:F401
sonar.issue.ignore.multicriteria.e4.resourceKey=**/__init__.py

# Exclude line length issues (handled by formatters)
sonar.issue.ignore.multicriteria.e5.ruleKey=python:E501
sonar.issue.ignore.multicriteria.e5.resourceKey=**/*.py

# ===================================
# Security Configuration
# ===================================

# Security hotspot exclusions
sonar.security.hotspots.inheritFromParent=true

# ===================================
# Performance Configuration
# ===================================

# Analysis performance
sonar.analysis.mode=publish
sonar.dynamicAnalysis=reuseReports

# Scanner performance
sonar.scanner.maxHeap=2048m
sonar.log.level=INFO

# ===================================
# Integration Configuration
# ===================================

# SCM configuration
sonar.scm.provider=git
sonar.scm.forceReloadAll=false

# Build breaker configuration
sonar.buildbreaker.skip=false
sonar.buildbreaker.queryMaxAttempts=50
sonar.buildbreaker.queryInterval=10000

# ===================================
# Custom Metrics
# ===================================

# Custom quality gate conditions
sonar.qualitygate.wait=true
sonar.qualitygate.timeout=300

# Branch analysis
sonar.branch.name=${BRANCH_NAME}
sonar.branch.target=main

# Pull request analysis
sonar.pullrequest.key=${PULL_REQUEST_KEY}
sonar.pullrequest.branch=${PULL_REQUEST_BRANCH}
sonar.pullrequest.base=${PULL_REQUEST_BASE}