# PostgreSQL Read Replica Configuration
# This configuration is for read-only replica servers

# Include main configuration
include = 'postgresql.conf'

# Replica-specific settings
hot_standby = on
max_standby_streaming_delay = 30s
max_standby_archive_delay = 30s
hot_standby_feedback = on
wal_receiver_status_interval = 10s
wal_receiver_timeout = 60s

# Read-only optimizations
default_transaction_isolation = 'read committed'
max_connections = 300  # Can handle more read connections

# Disable archiving on replica
archive_mode = off
archive_command = ''

# Logging for replica
log_line_prefix = '[REPLICA] %t [%p]: [%l-1] user=%u,db=%d,app=%a,client=%h '
log_min_messages = info
log_min_error_statement = error

# Performance tuning for read workloads
effective_cache_size = 2GB
random_page_cost = 1.0  # Slightly lower for read-heavy workloads
seq_page_cost = 1.0

# Vacuum settings (less aggressive on replica)
autovacuum = off  # Disable on replica, handled by primary