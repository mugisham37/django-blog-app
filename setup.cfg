# ===================================
# Flake8 Configuration
# ===================================
[flake8]
max-line-length = 88
max-complexity = 10
select = E,W,F,C,N,B,S,T,D
ignore = 
    # Black compatibility
    E203,  # whitespace before ':'
    E501,  # line too long (handled by black)
    W503,  # line break before binary operator
    # Django specific
    DJ01,  # avoid using null=True on string-based fields
    # Documentation
    D100,  # missing docstring in public module
    D101,  # missing docstring in public class
    D102,  # missing docstring in public method
    D103,  # missing docstring in public function
    D104,  # missing docstring in public package
    D105,  # missing docstring in magic method
    # Security (handled by bandit)
    S101,  # use of assert detected
    S311,  # standard pseudo-random generators

exclude = 
    .git,
    __pycache__,
    .tox,
    .eggs,
    *.egg,
    build,
    dist,
    .venv,
    venv,
    node_modules,
    migrations,
    .mypy_cache,
    .pytest_cache,
    htmlcov

per-file-ignores =
    # Tests can use assert and have longer lines
    tests/*.py:S101,E501,D
    */tests.py:S101,E501,D
    test_*.py:S101,E501,D
    # Settings files can have longer lines
    */settings/*.py:E501,S105,S106
    # Migrations can have longer lines
    */migrations/*.py:E501
    # Init files don't need docstrings
    __init__.py:D104
    # Management commands
    */management/commands/*.py:D

# Flake8 plugins configuration
doctests = True
statistics = True
count = True
show-source = True

# flake8-docstrings
docstring-convention = google

# flake8-import-order
import-order-style = google
application-import-names = 
    enterprise_core,
    enterprise_auth,
    enterprise_cache, 
    enterprise_config,
    enterprise_database,
    enterprise_types

# flake8-quotes
inline-quotes = single
multiline-quotes = double
docstring-quotes = double
avoid-escape = True

# flake8-bugbear
extend-immutable-calls = 
    fastapi.Depends,
    fastapi.Query,
    fastapi.Path

# ===================================
# MyPy Configuration (Fallback)
# ===================================
[mypy]
python_version = 3.11
warn_return_any = True
warn_unused_configs = True
disallow_untyped_defs = True
disallow_incomplete_defs = True
check_untyped_defs = True
disallow_untyped_decorators = True
no_implicit_optional = True
warn_redundant_casts = True
warn_unused_ignores = True
warn_no_return = True
warn_unreachable = True
strict_equality = True
show_error_codes = True

[mypy-*.migrations.*]
ignore_errors = True

[mypy-tests.*]
disallow_untyped_defs = False

# Third-party packages without stubs
[mypy-factory_boy.*]
ignore_missing_imports = True

[mypy-faker.*]
ignore_missing_imports = True

[mypy-channels.*]
ignore_missing_imports = True

[mypy-channels_redis.*]
ignore_missing_imports = True

[mypy-redis.*]
ignore_missing_imports = True

[mypy-celery.*]
ignore_missing_imports = True